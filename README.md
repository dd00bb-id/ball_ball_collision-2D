# 공과 공의 충돌 알고리즘

이 알고리즘은 두 개의 직선으로 움직이는 공들이 충돌하는 시점과 충돌 지점을 계산하고, 그에 따른 충돌 후 운동을 예측합니다. 주로 물리 엔진에서 사용되며, 이를 바탕으로 게임(예: 당구 게임)에서 공들이 어떻게 상호작용하는지 모델링할 수 있습니다.

## 1. 공의 속성 설정

각 공은 다음과 같은 속성들을 가집니다:

- **중심 좌표 (x, y)**: 공의 중심 위치
- **질량 (m)**: 공의 질량
- **속도 (v)**: 공의 속도 (속도는 방향과 크기를 갖는 벡터로 표현)
- **반지름 (r)**: 공의 크기
- **개수 (n)**: 공의 개수 (두 공의 경우에는 n=2)

## 2. 충돌 시점 및 충돌 지점 계산

충돌 시점을 계산하려면 두 공의 운동 방정식을 풀어야 합니다. 이를 위해 두 공의 중심 사이의 거리를 계산하고, 그 거리가 두 공의 반지름의 합과 일치하는 시점을 찾아냅니다.

- 두 공의 중심 간 거리:  
  \[
  d = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}
  \]
  여기서 \( (x_1, y_1) \)와 \( (x_2, y_2) \)는 각 공의 중심 좌표입니다.

- 충돌 시점은 두 공의 속도와 방향을 고려하여 결정됩니다.

## 3. 충돌 후 속도 계산 (운동량 보존)

충돌 전후의 운동량이 보존되어야 하므로, 충돌 후 각 공의 속도는 다음과 같은 물리 법칙에 따라 계산됩니다:

- **운동량 보존법칙**:  
  \[
  m_1 \cdot v_1 + m_2 \cdot v_2 = m_1 \cdot v_1' + m_2 \cdot v_2'
  \]
  여기서 \( v_1 \)와 \( v_2 \)는 충돌 전의 속도, \( v_1' \)와 \( v_2' \)는 충돌 후의 속도입니다.

- **상대 속도 관계**:  
  두 공이 충돌하기 전 후의 상대 속도는 다음과 같은 관계를 가집니다.
  \[
  \mathbf{v}_{rel} = \mathbf{v}_1 - \mathbf{v}_2
  \]
  \[
  \mathbf{v}_{rel}' = - \mathbf{v}_1' + \mathbf{v}_2'
  \]
  두 공의 상대 속도가 충돌 전후에 반전된다는 것이 핵심입니다.

## 4. 충돌 후 방향과 속도 결정

충돌 후 두 공의 속도 벡터는 운동량 보존과 에너지 보존 법칙을 이용해 계산됩니다. 이 과정에서 두 공의 반지름과 질량, 속도 등이 고려됩니다.

### 4.1. 충돌 후 속도 계산식

두 공의 충돌 후 속도는 다음의 공식을 통해 구할 수 있습니다:

- 공 1의 충돌 후 속도 \( v_1' \):
  \[
  v_1' = \frac{(m_1 - m_2) v_1 + 2 m_2 v_2}{m_1 + m_2}
  \]

- 공 2의 충돌 후 속도 \( v_2' \):
  \[
  v_2' = \frac{(m_2 - m_1) v_2 + 2 m_1 v_1}{m_1 + m_2}
  \]

이러한 공식은 두 공의 질량과 속도에 따라 충돌 후 속도를 계산합니다.

## 5. 충돌 후 운동

충돌 후 각 공은 새로운 속도와 방향으로 이동하게 됩니다. 이를 게임이나 시뮬레이션에서 구현하면 공들이 새로운 경로로 이동하게 되며, 바닥과 벽에 반사되거나 다른 물리적 상호작용을 할 수 있습니다.

## 6. 활용 예시

이 알고리즘은 여러 분야에서 활용될 수 있습니다:

- **당구 게임**: 두 공의 충돌 후 반응을 예측하여 공들이 어떻게 움직일지 계산합니다.
- **반사 및 충돌 시뮬레이션**: 벽이나 다른 표면과의 충돌을 계산하여 공들의 이동을 예측합니다.

##7.코드 시뮬레이션 결과



![Image](https://github.com/user-attachments/assets/4f444150-ec62-4e64-9797-e4b9ed876711)








## 7. 마무리

이 알고리즘을 사용하면 게임에서 공의 움직임과 상호작용을 더 현실감 있게 구현할 수 있습니다. 물리 엔진의 핵심 원칙인 운동량 보존법칙과 상대 속도 법칙을 통해 충돌 후 공의 새로운 속도와 방향을 정확하게 계산할 수 있습니다.
